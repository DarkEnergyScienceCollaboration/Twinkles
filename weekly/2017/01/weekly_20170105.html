<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
   <style type="text/css">code{white-space: pre;}</style>
   <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
   <link rel="stylesheet" type="text/css" href="../../../stylesheets/stylesheet.css" media="screen">
   <link rel="stylesheet" type="text/css" href="../../../stylesheets/github-dark.css" media="screen">
   <link rel="stylesheet" type="text/css" href="../../../stylesheets/print.css" media="print">

  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../../../stylesheets/pandoc.css" type="text/css" />
</head>
<body>
   <div id="container">
   <div class="inner">

<h1>Twinkles Weekly: January 5, 2017</h1>
<p>Looking forward to the collaboration meeting in early February, we talked through our roadblocks to producing Run 3 DIAObject light curves, the remaining PhoSim “Long Jobs” and related PhoSim/workflow engine development, and Bryce showed us how we can now run IPython notebooks at NERSC remotely, over the web.</p>
<h2 id="remote-notebooks-at-nersc"><strong>Remote Notebooks at NERSC!</strong></h2>
<p>Bryce got this working, and told us all about it. Notes on how to get set up are here: <a href="https://github.com/LSSTDESC/Monitor/blob/master/doc/setup_jupyter-dev.md"><em>https://github.com/LSSTDESC/Monitor/blob/master/doc/setup_jupyter-dev.md</em></a> We agreed they could use some high level introduction text, but they are fully tested and Bryce is planning to use this method to analyze the Run 3 light curves. We tried installing a python package from the notebook itself: `pip install --user &lt;package&gt;` worked fine (after kernel restart). We started thinking about how to share results generated by NERSC notebooks, and will investigate shared project area, and storing outputs as html while checking in clean notebooks to the Twinkles repo.</p>
<h2 id="dm-level-2-pipeline"><strong>DM Level 2 Pipeline</strong></h2>
<h3 id="configuration-roadblocks"><strong>Configuration Roadblocks</strong></h3>
<p>Simon pointed out <a href="https://github.com/LSSTDESC/Twinkles/issues/422"><em>#422</em></a> (config files for old-style coadd creation) and <a href="https://github.com/LSSTDESC/Twinkles/issues/423"><em>#423</em></a> (FITS table header interpretation), and we discussed them. This led to a recollection that we need to get `cmodel` galaxy measurements going for the SN error model: Simon will provide a cookbook update.</p>
<h3 id="run-3-plan"><strong>Run 3 Plan</strong></h3>
<p>Tony reports:</p>
<ul>
<li><blockquote>
<p>All completed run 3 visits (21951 visits) have been processed through the eImage stage. Only 5 <a href="http://srs.slac.stanford.edu/Pipeline-II/exp/SRS/process.jsp?status=FAILED&amp;pstream=42319933&amp;process=41814443"><em>failures</em></a>:</p>
</blockquote></li>
</ul>
<ul>
<li><blockquote>
<p>2x ValueError: cannot convert float NaN to integer (472762, 2441837)</p>
</blockquote></li>
<li><blockquote>
<p>2x RuntimeError: Only 1 sources for calculation of aperture correction for 'base_GaussianFlux'; require at least 2 (472793, 1212518)</p>
</blockquote></li>
<li><blockquote>
<p>1x transient failure perhaps, should be rerun (<a href="http://srs.slac.stanford.edu/Pipeline-II/exp/SRS/pi.jsp?pi=42367552"><em>2215324</em></a>)</p>
</blockquote></li>
</ul>
<ul>
<li><blockquote>
<p>There is nothing preventing coadds/image differencing being run, except perhaps lack of NERSC allocation.</p>
</blockquote></li>
</ul>
<p>We talked about getting results together in time for the February meeting: Tony and Simon will get the pipeline up and running and try submitting jobs over teh weekend, hopefully taking us into the NERSC allocation red.</p>
<h2 id="phosim-long-jobs"><strong>PhoSim Long Jobs</strong></h2>
<p>Tom reported that the checkpointing mechanism (DMTCP) has been installed and tested, but does not yet have support from the workflow engine. A first support attempt failed but the issue is still on Brian’s agenda. Brian will work on this. We have 19 Run 3 jobs to retry (they timed out) and then ~1000 further Run 3 jobs that are predicted to exceed the 48 hour limit.</p>
<p>Tom also reported on a useful conversation with Glenn S, about how the multithreading is working: there could be some efficiey gains to be made by recoding. Tom will investigate wih others at SLAC (Tony suggested the GEANT4 team), and work with Glenn to improve the PhoSim code (we hope!).</p>
<p>Tony and Tom are meetig with Mustapha at NERSC to discuss these and other issues, and are hopeful of getting things working better at NERSC this year.</p>
<h2 id="twinkles-2-planning"><strong>Twinkles 2 Planning</strong></h2>
<p>We decided to postpone serious Twinkles 2 planning to the collaboration meeting, but noted that some discussion with parties outside the DESC can begin now. Simon suggested that the DM team might be interested in Twinkles 2 as a testbed for Alert production. Scott offered to contact Ashish Mahabal and Federica Bianco in the Transients and Variables science collaboration about getting realistic populations of more transients into Twinkles 2, to provide some fresh inputs to the Broker and Classifier codes that are being developed.</p>
</div>
</div>
</body>
</html>
